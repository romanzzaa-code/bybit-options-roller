Context: Bybit Options Roller (Go)Дата сохранения: 11.01.2026Статус: Этап 1 (Core) завершен. Переход к Этапу 2 (Database).1. Описание проектаSaaS-бот для автоматического роллирования опционных позиций на Bybit (Unified Trading Account).Архитектура: Modular Monolith / Clean Architecture.Стек: Go 1.22+, Bybit V5 API, PostgreSQL (планируется).2. Текущая структура проектаПроект разбит на слои согласно принципам Clean Architecture:cmd/bot/: Точка входа (main.go). Инициализирует конфиг, клиент API и сервис. Содержит тестовый прогон (manual test).internal/domain/:models.go: Сущности (Task, User, Position) и Value Objects. Используется decimal.Decimal для денег.interfaces.go: Контракты (ExchangeAdapter, TaskRepository). Вся логика зависит от них.internal/infrastructure/bybit/:client.go: Реализация ExchangeAdapter. Подпись запросов (HMAC-SHA256), методы GetMarkPrice, GetPosition, PlaceOrder.dto.go: Структуры для парсинга JSON ответов от API V5.internal/usecase/:roller.go: Бизнес-логика роллирования.Проверка триггера (Call/Put).Паттерн Saga (Закрытие Leg 1 -> Открытие Leg 2).Парсинг и расчет следующего тикера (Regex).internal/config/: Загрузка конфигурации (пока заглушка для локального запуска).3. Последние действияРеализована вся базовая логика "Ядра".Выполнен go run cmd/bot/main.go.Результат теста: Успешная инициализация. Клиент отправил запрос на Bybit Testnet. Получена ошибка symbol not found (ожидаемо, так как тестовый тикер устарел), что подтверждает работоспособность сетевого слоя и обработки ошибок.4. План на следующую сессию (Этап 2)База данных:Поднять PostgreSQL в Docker.Написать SQL-миграции (создание таблиц).Repository Layer:Реализовать TaskRepository (методы GetTask, UpdateStatus).Интеграция:Заменить фейковые данные в main.go на чтение из реальной БД.5. Заметки разработчикаВ infrastructure/bybit/client.go сейчас используется прямая передача секрета. При внедрении БД нужно добавить дешифровку (SecretEnc).Логика роллирования (roller.go) готова к тестированию на реальных тикерах.